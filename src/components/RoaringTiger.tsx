import { useEffect, useRef } from "react";
import { motion } from "framer-motion";
import gsap from "gsap";

interface RoaringTigerProps {
  className?: string;
}

export const RoaringTiger = ({ className = "" }: RoaringTigerProps) => {
  const tigerRef = useRef<HTMLDivElement>(null);
  const headRef = useRef<SVGGElement>(null);

  useEffect(() => {
    if (!tigerRef.current) return;

    const ctx = gsap.context(() => {
      // Head turning left and right animation
      gsap.to(".tiger-head", {
        rotateY: 15,
        transformOrigin: "center bottom",
        duration: 1.5,
        ease: "power1.inOut",
        yoyo: true,
        repeat: -1,
      });

      // Roaring effect - jaw opening
      gsap.to(".tiger-jaw", {
        y: 3,
        scaleY: 1.1,
        transformOrigin: "top center",
        duration: 0.8,
        ease: "power2.inOut",
        yoyo: true,
        repeat: -1,
        repeatDelay: 1,
      });

      // Subtle body breathing animation
      gsap.to(".tiger-body", {
        scaleY: 1.02,
        transformOrigin: "bottom center",
        duration: 2,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
      });

      // Tail wagging
      gsap.to(".tiger-tail", {
        rotate: 10,
        transformOrigin: "left center",
        duration: 0.8,
        ease: "power1.inOut",
        yoyo: true,
        repeat: -1,
      });

      // Ears twitching
      gsap.to(".tiger-ears", {
        rotate: 5,
        transformOrigin: "center bottom",
        duration: 0.5,
        ease: "power1.inOut",
        yoyo: true,
        repeat: -1,
        repeatDelay: 2,
      });
    }, tigerRef);

    return () => ctx.revert();
  }, []);

  return (
    <motion.div
      ref={tigerRef}
      className={`${className}`}
      initial={{ opacity: 0, scale: 0.8 }}
      animate={{ opacity: 1, scale: 1 }}
      transition={{ duration: 0.5 }}
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 13.6 115.8 76.2"
        className="w-full h-full drop-shadow-lg"
        style={{ maxHeight: "180px" }}
      >
        <defs>
          <linearGradient id="tigerGradient1" x1="98.395" y1="56.2334" x2="108.5967" y2="87.1094" gradientUnits="userSpaceOnUse">
            <stop offset="0" style={{ stopColor: "#FFFFFF" }} />
            <stop offset="0.1129" style={{ stopColor: "#FCF7EA" }} />
            <stop offset="0.3472" style={{ stopColor: "#F6E1B2" }} />
            <stop offset="0.6792" style={{ stopColor: "#ECBF5B" }} />
            <stop offset="1" style={{ stopColor: "#E19C00" }} />
          </linearGradient>
          <linearGradient id="tigerGradient2" x1="28.3594" y1="51.9518" x2="93.3656" y2="51.9518" gradientUnits="userSpaceOnUse">
            <stop offset="0" style={{ stopColor: "#FFFFFF" }} />
            <stop offset="0.8358" style={{ stopColor: "#EAEAEA" }} />
            <stop offset="1" style={{ stopColor: "#E5E5E5" }} />
          </linearGradient>
          <radialGradient id="tigerRadial1" cx="62.0997" cy="-146.7813" r="13.759" gradientTransform="matrix(0.9877 -0.1563 0.1563 0.9877 -31.7083 172.5211)" gradientUnits="userSpaceOnUse">
            <stop offset="0.1732" style={{ stopColor: "#F5AF5A" }} />
            <stop offset="0.8261" style={{ stopColor: "#5E3D1C" }} />
          </radialGradient>
        </defs>
        
        <g className="tiger-body">
          {/* Front leg */}
          <g>
            <path d="M39.574,57.573c-0.063-0.886-0.182-1.773-0.289-2.632c-0.342-2.723-0.787-5.398-2.38-7.701c-1.265-1.834-2.608-4.242-5.185-4.058c-2.191,0.155-3.61,3.032-3.503,4.979c0.003,0.054,0.04,0.083,0.082,0.09c0.476,0.474,0.862,1.06,1.317,1.554c0.25,0.274,0.383,0.638,0.551,0.964c0.167,0.329,0.316,0.667,0.462,1.007c0.299,0.696,0.667,1.364,0.943,2.068c0.019,0.048,0.036,0.099,0.053,0.148c-0.005,0.028-0.008,0.055-0.012,0.081c-0.122,0.705-0.431,1.328-0.685,1.988c-0.227,0.584-0.538,1.137-0.854,1.675c-2.892,4.903-5.708,9.932-8.41,14.941c-0.301,0.559-0.537,1.142-0.799,1.718c-0.262,0.569-0.522,1.131-0.694,1.733c-0.349,1.21-0.374,2.42-0.341,3.669c0.023,0.867,0.133,1.736,0.463,2.544c0.341,0.834,0.721,1.759,1.317,2.445c0.397,0.457,0.991,1.062,1.644,1.072c0.202,0.003,0.511,0.039,0.66-0.144c0.049-0.059,0.086-0.123,0.118-0.188c0.079,0.043,0.159,0.08,0.238,0.108c0.527,0.184,1.115-0.202,1.406-0.61c0.192-0.266,0.251-0.598,0.233-0.94c0.088,0.02,0.175,0.036,0.261,0.042c1.25,0.106,1.124-1.283,0.835-2.132c-0.238-0.698-0.73-1.21-1.208-1.751c-0.432-0.492-0.798-1.118-1.421-1.406c-0.291-0.132-0.631-0.222-0.949-0.231c0.028-0.199,0.061-0.396,0.1-0.595c0.273-1.419,1.399-2.61,2.33-3.668c0.963-1.095,2.027-2.144,3.129-3.096c1.045-0.901,1.973-1.931,3.067-2.776c2.003-1.546,4.264-2.969,5.956-4.875C39.535,61.878,39.726,59.731,39.574,57.573z" fill="#FAB600"/>
            <path d="M33.303,56.858c-0.497-0.229-1.218,0.491-0.9,0.974c0.156,0.235,0.38,0.414,0.609,0.581c0.294,0.177,0.639,0.322,0.747,0.084C33.945,58.09,33.75,57.064,33.303,56.858z" fill="#7C4706"/>
            <path d="M35.57,59.642c-0.375-0.198-0.526,0.215-0.736,0.443c-0.018,0.019-0.039,0.026-0.059,0.025c-0.049,0.165-0.084,0.425,0.126,0.473c0.155,0.036,0.319-0.018,0.452-0.101C35.578,60.339,35.954,59.846,35.57,59.642z" fill="#7C4706"/>
          </g>

          {/* Back leg */}
          <g>
            <path d="M63.955,56.377c0,0,2.813,3.507,4.068,6.105c1.256,2.598,1.17,6.148,1.084,7.274c-0.086,1.125-1.906,10.001-1.906,10.001s-0.346,0.044-0.974-0.845c-0.628-0.887-1.515-0.628-1.775-0.345c0,0-1.667-0.975-2.207,0.302c0,0-1.082-0.562-1.299,0.888c-0.218,1.45,0.78,2.987,1.774,2.295c0,0,0.303,0.58,1.408,0.171c0,0,0.433,0.572,2.943,0.146c2.512-0.426,2.856-0.556,2.943-1.465c0.088-0.91,0.479-4.914,2.426-8.313c1.947-3.398,3.291-3.789,3.247-5.108c-0.044-1.321-1.321-1.602-1.494-2.858c-0.173-1.255,3.421-8.382,5.218-10.003c1.796-1.62,2.771-8.679-1.604-9.024C73.436,45.25,61.66,53.251,63.955,56.377z" fill="#F59C00"/>
          </g>

          {/* Tail */}
          <g className="tiger-tail">
            <path d="M77.449,29.258c1.043,0.237,2.102,0.285,3.164,0.628c5.555,1.801,11.326,5.606,14.057,10.916c1.734,3.374,2.63,7.147,2.721,10.934c0.154,6.537-3.144,14.568,1.643,20.263c1.254,1.49,3.285,2.31,5.146,1.573c2.974-1.177,2.912-4.587,2.912-4.587l0.372,1.178c0,0-0.124-2.665,2.23-3.224l-0.246,0.992c0,0,1.176-2.355,4.213-1.92c0,0,1.859,5.577-2.231,8.862c-3.068,2.464-7.296,5.639-11.352,3.451c-1.007-0.543-2.176-1.395-2.896-2.293c-0.853-1.064-1.821-2.505-2.232-3.817c-0.901-2.886-0.858-5.936-0.709-8.923c0.071-1.419,0.188-2.841,0.229-4.263c0.067-2.291,0.171-4.581-0.084-6.866c-0.496-4.435-1.24-5.807-3.284-6.578C91.1,45.585,84.559,30.871,77.449,29.258z" fill="url(#tigerGradient1)"/>
          </g>

          {/* Main body */}
          <path d="M33.455,28.009c0,0,3.142,1.419,6.365,0c3.223-1.42,4.738-1.509,4.738-1.509s-1.645,1.303-1.949,1.888c0,0,1.646-1.331,3.638-1.175c0,0-1.472,0.689-1.861,1.548c0,0,2.771-1.565,4.241-0.569c1.473,0.996,5.371,8.052,10.002,7.317c4.634-0.735,13.985-7.23,17.622-7.274c3.638-0.043,15.804,8.486,16.886,12.6s-1.993,9.828-2.512,13.075c-0.52,3.248-1.774,7.058-0.996,8.053c0.78,0.997,2.426,2.685,2.642,3.464c0.217,0.78-3.767,11.257-3.636,12.426c0.13,1.169,0.907,4.071-0.78,4.806c-1.688,0.736-3.117,0.606-4.07,0c0,0-1.212,0.476-2.034-0.347c0,0-1.212,0.996-1.603-1.255c-0.39-2.251,1.56-1.818,1.56-1.818s1.255-1.43,2.555-0.129c0,0,0.39-0.391,1.3-0.13c0,0,0.214-0.736,0.604-0.996c0,0,0.521-4.806,0.952-7.057c0.433-2.252,0.49-3.089-0.26-3.695c-0.751-0.605-3.464-2.222-4.704-3.982c-1.24-1.761-4.1-10.541-4.232-14.873c0,0-1.487,0.397-3.572,2.051c-2.082,1.653-5.985,6.318-9.326,7.375c-3.342,1.059-7.111,1.521-7.84,1.356c0,0,1.125,0.596,1.72,0.661c0,0-0.991,0.396-2.513,0.266c0,0,0.629,0.43,1.853,0.594c0,0-1.424,0.662-2.614,0.53c0,0,0.695,0.297,1.226,0.396c0,0-1.258,0.331-3.077,0.066c-1.818-0.265-2.052-0.992-2.052-0.992s-0.528,2.25-0.066,4.366c0.465,2.118,1.125,4.731,0.929,5.425c-0.2,0.694-1.987,4.23-2.086,8.002c-0.1,3.773-0.066,4.733,0.362,5.559c0.431,0.826,0.563,1.554-0.064,2.282c-0.628,0.729-0.729,0.958-1.984,1.158c-1.257,0.199-3.242,0.331-4.004-0.265c0,0-0.782,0.336-1.459-0.06c0,0-1.987,0.509-2.25-1.037c-0.266-1.548,0.712-2.682,1.177-2.928c0.467-0.246,1.293-0.106,1.293-0.106s1.144-0.87,2.056,0.106c0,0,0.616-0.467,1.795,0.518c0,0,0.584-2.759-0.224-7.521c-0.81-4.762-1.617-12.209-2.887-13.71c-1.271-1.501-5.781-6.35-10.858-6.062c0,0-1.02-2.67,0.237-5.701c0,0-1.198,0.708-1.198,2.237c0,0-0.636-2.108,0.678-3.869c0,0-1.884-2.612-3.452-3.073C28.149,45.538,26.56,34.623,33.455,28.009z" fill="#F8A90F"/>
        </g>

        {/* Head group with rotation animation */}
        <g className="tiger-head" ref={headRef}>
          {/* Ears */}
          <g className="tiger-ears">
            <path d="M42.902,20.767c-0.462-2.169-2.079-4.012-4.635-4.28c-1.211-0.127-2.455,0.065-3.513,0.701c-1.053,0.632-1.809,1.704-2.496,2.683c-0.444,0.632-0.991,1.142-1.644,1.557c-0.313,0.198-0.59,0.4-0.951,0.509c-0.038,0.012-0.078,0.021-0.117,0.03c-0.026-0.235-0.04-0.474-0.045-0.721c0-0.11-0.151-0.117-0.195-0.032c0.035-0.067-0.188,0.105-0.217,0.14c-0.092,0.106-0.186,0.24-0.286,0.364c0.05-0.372,0.106-0.752,0.085-1.114c-0.006-0.07-0.1-0.118-0.155-0.07c-0.333,0.282-0.674,0.564-1.015,0.842c-0.25,0.033-0.516,0.002-0.758-0.025c-0.592-0.066-1.173-0.051-1.764-0.088c-1.16-0.072-2.3-0.046-3.454,0.123c-1.225,0.178-2.451,0.58-3.593,1.04c-0.58,0.235-1.162,0.51-1.781,0.614c-1.098-0.248-2.092-1.127-2.891-1.831c-1.019-0.896-1.939-1.54-3.302-1.757c-3.737-0.6-7.619,4.223-5.294,7.579c0.57,0.82,1.759,1.761,2.715,2.07c1.111,0.357,2.304,0.31,3.411-0.006c0.59-0.169,1.124-0.438,1.706-0.616c-0.187,0.393-0.246,0.792-0.243,1.234c0,0.043,0,0.086,0.003,0.128c-0.307,0.305-0.572,0.657-0.786,1.075c-0.453,0.878-0.686,2.015-0.546,2.999c0.015,0.096,0.125,0.126,0.188,0.057c0.113-0.121,0.17-0.266,0.28-0.395c0.171-0.199,0.378-0.374,0.575-0.546c0.038-0.034,0.08-0.065,0.124-0.098c-0.519,1.403-0.951,2.832-0.558,4.347c0.244,0.944,0.725,1.827,1.209,2.667c0.204,0.353,0.429,0.7,0.664,1.042c-0.648,0.545-1.2,1.293-1.613,1.967c-0.497,0.807-0.815,1.885-0.915,2.823c-0.01,0.081,0.058,0.127,0.132,0.11c0.102-0.024,0.146-0.097,0.207-0.181c0.213-0.292,0.512-0.414,0.835-0.545c0.041-0.016,0.082-0.03,0.123-0.046c-0.094,0.147-0.184,0.296-0.261,0.445c-0.175,0.345-0.399,0.701-0.508,1.071c-0.027,0.088,0.081,0.161,0.158,0.13c0.357-0.133,0.632-0.219,1.022-0.186c0.318,0.026,0.63,0.105,0.937,0.191c0.65,0.182,1.206,0.445,1.782,0.792c0,0-0.108,1.101,1.448,1.287c1.927,0.229,1.535-0.482,1.967-0.278c1.786,0.846,2.08,2.571,3.763,3.474c1.597,0.857,3.678-0.015,5.013-1c0.656-0.485,1.259-1.066,1.736-1.726c0.447-0.62,0.574-1.385,0.963-2.003c1.877-2.989,4.891-5.278,7.484-7.62c0.727-0.653,1.663-1.587,2.698-1.66c0.567-0.04-0.46-1.151-0.552-1.268c-0.209-0.264-0.457-0.449-0.739-0.604c0.04-0.006,0.077-0.013,0.119-0.018c0.499-0.066,0.988,0.062,1.477,0.021c0.061-0.004,0.106-0.07,0.083-0.127c-0.231-0.568-1.239-0.933-1.753-1.139c-0.389-0.156-0.764-0.287-1.182-0.351c-0.15-0.023-0.305-0.028-0.459-0.028c0.032-1.431-0.274-2.927-0.692-4.275c-0.237-0.764-0.521-1.57-0.929-2.262c-0.07-0.117-0.152-0.231-0.235-0.342c0.413,0.135,0.842,0.222,1.258,0.263c0.575,0.057,1.077-0.005,1.621-0.194c0.591-0.206,1.188-0.36,1.743-0.658c0.487-0.259,0.894-0.575,1.246-0.997C42.888,24.528,43.281,22.539,42.902,20.767z" fill="#FAB600"/>
          </g>

          {/* Face details */}
          <g>
            <path d="M12.788,23.032c-0.548-1.726-2.868-2.568-4.494-2.14c-0.49,0.128-1.032,0.383-1.421,0.712c-0.268,0.226-0.527,0.518-0.707,0.819c-0.24,0.409-0.459,0.97-0.506,1.446c-0.058,0.582,0.016,1.17,0.18,1.728c0.169,0.573,0.595,1.074,0.975,1.519C7.566,28,8.578,28.28,9.711,28.248c0.904-0.026,2.157-0.343,2.538-1.253c0.379-0.903-0.11-1.86-0.878-2.339c-0.463-0.29-0.947-0.469-1.44-0.521c0.229-0.06,0.459-0.109,0.696-0.143c0.269-0.039,0.55-0.025,0.82-0.026c0.333-0.001,0.602,0.129,0.915,0.154c0.07,0.004,0.119-0.064,0.079-0.127c-0.303-0.47-1.116-0.785-1.607-0.994c-0.154-0.065-0.305-0.108-0.453-0.142c0.757-0.127,1.512-0.066,2.21,0.357C12.71,23.286,12.822,23.138,12.788,23.032z" fill="url(#tigerRadial1)"/>
            
            {/* Right ear */}
            <path d="M41.578,21.023c-0.232-1.471-0.951-3.101-2.43-3.576c-0.404-0.13-0.943-0.204-1.366-0.146c-1.149,0.16-1.894,0.429-2.714,1.211c-0.267,0.255-0.885,0.977-1.007,1.342c-0.026,0.08,0.045,0.201,0.143,0.152c0.721-0.361,1.761-0.622,2.634-0.429c-0.18,0.039-0.357,0.09-0.521,0.142c-0.513,0.165-1.23,0.44-1.586,0.863c-0.047,0.058-0.009,0.145,0.062,0.16c0.123,0.023,0.226-0.049,0.34-0.085c0.399-0.127,0.803-0.195,1.222-0.141c0.169,0.022,0.33,0.063,0.484,0.116c-0.366,0.118-0.715,0.291-1.041,0.533c-0.361,0.272-0.694,0.773-0.933,1.152c-0.661,1.046-0.839,2.518,0.045,3.501c0.58,0.647,1.44,0.996,2.302,1.018c0.863,0.024,1.778-0.184,2.481-0.7c0.58-0.427,1.074-0.982,1.371-1.641c0.226-0.496,0.422-1.069,0.516-1.607c0.065-0.382,0.098-0.795,0.076-1.184C41.638,21.484,41.615,21.256,41.578,21.023z" fill="#F5AF5A"/>
          </g>

          {/* Jaw/mouth - animated for roaring */}
          <g className="tiger-jaw">
            <path d="M15.093,42.47c0,0-1.143,0.531-0.756,1.397c0.387,0.866,1.612,1.799,3.667,1.475c2.053-0.324,4.028-2.115,3.433-3.174C20.425,40.373,15.093,42.47,15.093,42.47z" fill="#2E1C00"/>
            
            {/* Nose and mouth area */}
            <path d="M26.479,46.948c-0.393,0.942-1.392,1.717-2.218,2.27c-0.443,0.294-0.793,0.758-1.361,0.789c-0.568,0.031-0.951-0.389-1.399-0.656c-0.719-0.432-1.52-0.983-2.395-0.989c0.197-0.297,0.295-0.67,0.387-1.003c0.061-0.217,0.049-0.411,0.014-0.603c0.099,0.105,0.201,0.208,0.315,0.296c0.403,0.316,0.95,0.521,1.436,0.66c0.558,0.157,1.105,0.06,1.667,0.005c0.565-0.057,1.095-0.235,1.622-0.436c0.493-0.187,0.903-0.663,1.251-1.042c0.003-0.003,0.007-0.007,0.008-0.01c0.393-0.261,0.679-0.73,0.937-1.148c-0.031,0.169-0.06,0.338-0.084,0.511C26.596,46.029,26.652,46.534,26.479,46.948z" fill="#E75667"/>
          </g>

          {/* Eyes */}
          <g>
            <ellipse cx="29" cy="32" rx="2.5" ry="3" fill="#8C481C"/>
            <ellipse cx="17" cy="35" rx="2" ry="2.5" fill="#8C481C"/>
            <circle cx="29.5" cy="31.5" r="1" fill="#FFFFFF"/>
            <circle cx="17.3" cy="34.5" r="0.8" fill="#FFFFFF"/>
          </g>

          {/* Face stripes */}
          <g>
            <path d="M14.024,27.013c-0.151-0.142-0.472-0.383-0.554-0.049c-0.025,0.105,0.014,0.211,0.044,0.313c0.009,0.081,0.027,0.161,0.073,0.22c0.064,0.089,0.192,0.102,0.294,0.085C14.153,27.531,14.218,27.192,14.024,27.013z" fill="#7C4706"/>
            <path d="M18.314,25.416c-0.191-0.09-0.379-0.127-0.584-0.074c-0.073,0.019-0.118,0.063-0.146,0.118c-0.187,0.127-0.286,0.434-0.281,0.665c0.008,0.201,0.107,0.367,0.292,0.455c0.065,0.031,0.146,0.01,0.206-0.021c0.119-0.055,0.258-0.045,0.367-0.122c0.16-0.11,0.365-0.314,0.4-0.515C18.601,25.735,18.491,25.5,18.314,25.416z" fill="#7C4706"/>
            <path d="M22.983,22.429c-0.237-0.051-0.426,0.105-0.432,0.346c-0.001,0.031,0.002,0.061,0.007,0.093c0.003,0.164,0.057,0.336,0.226,0.397c0.238,0.088,0.483-0.105,0.502-0.347C23.305,22.693,23.228,22.48,22.983,22.429z" fill="#7C4706"/>
            <path d="M31.033,23.486c-0.186-0.287-0.652-0.54-0.989-0.549c-0.132-0.003-0.264,0.103-0.347,0.239c-0.127,0.08-0.221,0.216-0.273,0.401c-0.057,0.188-0.119,0.511-0.086,0.71c0.033,0.19,0.169,0.266,0.303,0.39c0.29,0.259,0.872,0.087,1.146-0.106C31.133,24.325,31.264,23.847,31.033,23.486z" fill="#7C4706"/>
            <path d="M35.987,32.361c-0.024-0.314-0.151-0.865-0.535-0.942c-0.687-0.137-0.787,1.013-0.714,1.545c0.017,0.207,0.071,0.41,0.21,0.557c0.181,0.191,0.522,0.249,0.716,0.032C35.956,33.221,36.017,32.789,35.987,32.361z" fill="#7C4706"/>
          </g>
        </g>

        {/* Red stripes on body */}
        <path d="M29.193,60.44c-1.164,1.761-2.225,3.595-3.354,5.38c-1.19,1.884-2.371,3.773-3.407,5.747c-1.505,2.864-3.726,7.359-1.966,10.56c0.051,0.094,0.191-0.107,0.169-0.177c-1.282-3.899,0.777-7.994,2.641-11.367c1.88-3.408,4.431-6.542,5.962-10.129C29.256,60.409,29.213,60.409,29.193,60.44z" fill="#E74315"/>
        <path d="M46.896,69.294c-0.658-3.461-1.597-6.85-2.623-10.216c-0.031-0.104-0.168,0.059-0.147,0.131c0.899,3.308,1.774,6.63,2.433,9.995c0.678,3.46,0.93,6.912,1.152,10.421c0.004,0.097,0.107-0.014,0.111-0.065C48.037,76.144,47.534,72.64,46.896,69.294z" fill="#E74315"/>
        <path d="M83.613,60.047c-2.469-1.987-3.371-4.776-4.069-7.767c-0.396-1.706-0.773-3.412-1.083-5.136c-0.348-1.945-0.628-3.925-1.298-5.791c-0.029-0.083-0.121,0.048-0.113,0.101c0.702,3.797,1.35,7.597,2.224,11.358c0.651,2.792,1.546,5.952,4.236,7.412C83.581,60.264,83.674,60.097,83.613,60.047z" fill="#E74315"/>
      </svg>
    </motion.div>
  );
};
